<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="CourtHive TMX Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="CourtHive TMX Blog Atom Feed"><title data-react-helmet="true">TMX Architecture | CourtHive TMX</title><meta data-react-helmet="true" property="og:url" content="https://github.com/CourtHive/TMX/docs/architecture"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="TMX Architecture | CourtHive TMX"><meta data-react-helmet="true" name="description" content="TMX stands for eXtensible Tournament Management. The initial goal for TMX was to be able to rapidly leverage existing systems with data relevant to running tennis tournaments (including tournament calendars, rank lists, ratings and registered players); to manage the running of tournaments, including the real-time publishing of draws, statistics and results; and to produce document-based time capsules of all the data that was required to run tournaments, with the ability to export results in multiple formats."><meta data-react-helmet="true" property="og:description" content="TMX stands for eXtensible Tournament Management. The initial goal for TMX was to be able to rapidly leverage existing systems with data relevant to running tennis tournaments (including tournament calendars, rank lists, ratings and registered players); to manage the running of tournaments, including the real-time publishing of draws, statistics and results; and to produce document-based time capsules of all the data that was required to run tournaments, with the ability to export results in multiple formats."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/CourtHive/TMX/docs/architecture"><link data-react-helmet="true" rel="alternate" href="https://github.com/CourtHive/TMX/docs/architecture" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/CourtHive/TMX/docs/architecture" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.a150e3cc.css">
<link rel="preload" href="/assets/js/styles.704a0bc6.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.045d8d53.js" as="script">
<link rel="preload" href="/assets/js/main.7992feb9.js" as="script">
<link rel="preload" href="/assets/js/common.dac80fd1.js" as="script">
<link rel="preload" href="/assets/js/21.6a070af4.js" as="script">
<link rel="preload" href="/assets/js/22.89fb6b29.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.2c9593c0.js" as="script">
<link rel="preload" href="/assets/js/17896441.34261008.js" as="script">
<link rel="preload" href="/assets/js/5281b7a2.3801e63c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/CourtHive.png" alt="CourtHive TMX" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/CourtHive.png" alt="CourtHive TMX" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">CourtHive TMX</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/CourtHive/TMX" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/CourtHive.png" alt="CourtHive TMX" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/CourtHive.png" alt="CourtHive TMX" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">CourtHive TMX</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/CourtHive/TMX" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Project Structure</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/">Getting Started</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/architecture">TMX Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/challenge">CourtHive Challenge</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">TMX Architecture</h1></header><div class="markdown"><p>TMX stands for <em>eXtensible Tournament Management</em>. The initial goal for TMX was to be able to rapidly leverage existing systems with data relevant to running tennis tournaments (including tournament calendars, rank lists, ratings and registered players); to manage the running of tournaments, including the real-time publishing of draws, statistics and results; and to produce document-based time capsules of all the data that was required to run tournaments, with the ability to export results in multiple formats.</p><p>TMX is built as a <strong><em>Progressive Web Application</em></strong>, able to run in &quot;offline&quot; mode at venues where there is no internet connection or where reliable connectivitity is an issue. Tournament Directors are insulated from internet outages, and perforrmance is far superior to online-only applications.</p><p>While data can be imported into TMX by drag and drop or loading of local files, in normal use TMX connects to a <strong><em>CourtHive Server</em></strong> to retrieve tournament records and player lists and to save permanent copies of tournament records.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The initial release of TMX 2.0 has server integration disabled as the 2.0 server is in the process of being re-architected.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="indexeddb"></a><a href="https://www.w3.org/TR/IndexedDB/" target="_blank" rel="noopener noreferrer">IndexedDB</a><a class="hash-link" href="#indexeddb" title="Direct link to heading">#</a></h2><p>TMX makes use of <a href="https://javascript.info/indexeddb" target="_blank" rel="noopener noreferrer">IndexedDB</a> via <a href="https://dexie.org/" target="_blank" rel="noopener noreferrer">Dexie</a> to store <em>Tournament Records</em> and <em>Settings</em> locally.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="socketio"></a><a href="https://socket.io/" target="_blank" rel="noopener noreferrer">socket.io</a><a class="hash-link" href="#socketio" title="Direct link to heading">#</a></h2><p>TMX connects to a <strong><em>CourtHive Server</em></strong> primarily via <strong><a href="https://socket.io" target="_blank" rel="noopener noreferrer">socket.io</a></strong>; this <a href="https://javascript.info/websocket" target="_blank" rel="noopener noreferrer">webSocket</a> based connection enables TMX to listen for messages targeted to specific users or relavant to the tournament that is being managed. This communication channel is used to coordinate actions across multiple instances of TMX that are being used to run the same tournament, and to receive, for instance, live scoring information for matches which have been delegated to &quot;trackers&quot; which may be used by Chair Umpires or &quot;roaming referees&quot;.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ui-framework"></a>UI Framework<a class="hash-link" href="#ui-framework" title="Direct link to heading">#</a></h2><p>The UI components of TMX are developed with <a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer">React</a> and <a href="https://material-ui.com/" target="_blank" rel="noopener noreferrer">Material-UI</a>, utilizing <a href="https://redux.js.org/" target="_blank" rel="noopener noreferrer">Redux</a> with <a href="https://immerjs.github.io/immer/docs/introduction" target="_blank" rel="noopener noreferrer">Immer</a> for state management. The build process for TMX is <a href="https://reactjs.org/docs/create-a-new-react-app.html" target="_blank" rel="noopener noreferrer">create-react-app</a>.</p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="initialization-and-configuration"></a>Initialization and Configuration<a class="hash-link" href="#initialization-and-configuration" title="Direct link to heading">#</a></h2><p>TMX was designed to be configurable on the fly using a system of &quot;keys&quot;, which are JSON objects delivered to the client via <em>socket.io</em>; they are used to deliver language files, authorization tokens, and to change the behavior of the client by enabling or disabling functionality, typically based on the policies different organizations wish to enforce while tournaments are being run.</p><p>When TMX is initially launched the startup procedure is as follows:</p><ol><li>Gather context information including device details; parse query string; add window event listners for orientation changes, browser resize, error trapping and context menus</li><li>Initialize socket.io and connection to CourtHive Server</li><li>Initialize IndexedDb; initialize EventEmitter and related listeners</li><li>Request updated list of available idioms from CourtHive Server; update lanugage bindings if necessaary</li><li>Perform any tasks required by configuration, directives, or queryString values</li><li>Check whether TMX is running in development mode and if so set window.dev object</li><li>Initialize Redux store values relevant to configured state</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="defaultsjs"></a>defaults.js<a class="hash-link" href="#defaultsjs" title="Direct link to heading">#</a></h3><p>The default configuration for TMX is found in <code>&#x27;config/defaults.js&#x27;</code>. This file may be modified during the build process. When keys are loaded they are stored in <strong>IndexedDB</strong> and the settings they specify override the values in <code>&#x27;defaults.js&#x27;</code></p><p><code>&#x27;config/defaults.js&#x27;</code> is imported as <code>&#x27;env&#x27;</code> in modules where configuration values are required</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="contextjs"></a>context.js<a class="hash-link" href="#contextjs" title="Direct link to heading">#</a></h3><p><code>&#x27;context.js&#x27;</code> is somewhat of a legacy store, used in a similar way to <code>&#x27;defaults.js&#x27;</code>, but it contains information relevant to the current context, including authorization status, information about any queryString that was used to launch TMX, and an EventEmitter that is slowly being phased out.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="development-mode"></a>development mode<a class="hash-link" href="#development-mode" title="Direct link to heading">#</a></h3><p>When TMX is launched via <code>yarn start</code> and is running on <code>localhost</code> a <code>dev</code> object is available in the browser console which can be used to access functional modules which have been added to the dev context, including the <strong>Redux</strong> store.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">dev</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dev</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">tmxStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">getState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">tmx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">records</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tennis-open-data-standard-tods"></a><a href="https://itftennis.atlassian.net/wiki/spaces/TODS/overview" target="_blank" rel="noopener noreferrer">Tennis Open Data Standard (TODS)</a><a class="hash-link" href="#tennis-open-data-standard-tods" title="Direct link to heading">#</a></h3><p><strong>TODS</strong> is defined by the <a href="https://www.itftennis.com/en/" target="_blank" rel="noopener noreferrer">ITF</a> to facilitate the exchange of tennis-related data and to enable an ecosystem of services based on tennis data. TODS can be implemented in either XML or JSON. The <a href="https://www.worldtennisnumber.com/" target="_blank" rel="noopener noreferrer">World Tennis Number</a> is one of the first services provided by the ITF which is based on TODS.</p><p>TMX uses a JSON implementation of TODS internally to represent tournaments, and can create, load, receive, mutate, save and send tournament records. As used by TMX, TODS provides a document which can contain all the information necessary to run a tournament, or a time-capsule of all the data which was used to run a tournament. This document-based view means that external database calls are not necessary.</p><p>Every update operation performed by TMX is a mutation of a JSON-based tournament record.</p><p>The CourtHive Server handles any external integrations/connectivity that is required to import additional information into tournament records.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="engines"></a>Engines<a class="hash-link" href="#engines" title="Direct link to heading">#</a></h3><p>In TMX, changes to tournament records are performed exclusively by <strong>Engines</strong> which are provided by the <a href="https://courthive.github.io/tods-competition-factory/" target="_blank" rel="noopener noreferrer">Competition Factory</a>. These engines insure the integrity of tournament records and do not allow changes to the underlying JSON objects which would create invalid data or structures. <strong>Tournament Records should never be modified directly!</strong></p><p>The Competition Factory Engines are:</p><ol><li>Competition Engine - operations which span tournaments, such as scheduling</li><li>Tournament Engine - modify tournament attributes, add/delete participants or events</li><li>Draw Engine - core logic for creating and manipulaing draws including scoring</li></ol><p>Every engine has the same architecture. A core module provides default methods, such as loading documents to set state, and imports methods from <strong>governors</strong> which oversee different aspects of document mutation. Engines pass state and any data transformations made by middleware along to methods provided by governors.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="engines-add-context"></a>Engines Add Context<a class="hash-link" href="#engines-add-context" title="Direct link to heading">#</a></h3><p>When information is accessed via an engine, context is typically added to the requested information. A <strong>matchUp</strong> in TODS does not contain information about the objects within which it is embedded; for instance, a <strong>matchUp</strong> exists within a <strong>structure</strong> which is embedded within a <strong>drawDefinition</strong>, which is embeded within an <strong>event</strong>, which is embeddeed within a <strong>tournament</strong>. When a <strong>matchUp</strong> is displayed in a user interface context information is often required, such as <code>eventName</code>.</p><p>To access information:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> useSelector </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-redux&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> competitionEngine </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;engines/comptitionEngine&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> tournamentRecords </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useSelector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">tmx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">records</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  competitionEngine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">setState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">tournamentRecords</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> matchUps </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> competitionEngine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">allCompetitionMatchUps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="engines-and-redux"></a>Engines and Redux<a class="hash-link" href="#engines-and-redux" title="Direct link to heading">#</a></h3><p>All mutations to tournament records must be made using the engines. Additionally, all engine methods which result in a mutation must be called via the <strong>dispatch</strong> method of the Redux store.</p><p>To update information:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token method function property-access" style="color:rgb(130, 170, 255)">dispatch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    type</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;competitionEngine&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    payload</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      methods</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> method</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;methodName&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> params</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The dispatch types <code>competitionEngine</code> and <code>tournamentEngine</code> must be used to invoke <strong>ALL</strong> engine mutation methods. There are three downstream effects to successfully invoking an engine method via the store:</p><ol><li>Updating the store triggers updates in the UI</li><li>Updating the store triggers a local save of the tournament record to IndexedDB</li><li>Updating the store sends (or queues) a message to the CourtHive Server</li></ol><p>Engine mutation methods should be designed to accept the minimum information required to effect the desired mutation. This is because the attributes of each dispatch are intended to serve as a transactional history from which tournament state can be recreated, and because the messages sent to the CourtHive Server are broadcast to other instances of TMX which are operating on the same tournament record(s) to keep them in sync.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="redux-store"></a>Redux Store<a class="hash-link" href="#redux-store" title="Direct link to heading">#</a></h3><p>TMX defines a design pattern which makes use of <a href="https://immerjs.github.io/immer/docs/introduction" target="_blank" rel="noopener noreferrer">Immer</a> to modify the Redux Store. The core Reducer aggregates Immer &quot;Producers&quot; and catches errors (when not in dev mode) enabling any client-side errors to be sent to the CourtHive Server for proactive analysis / debugging.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Getting Started</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/challenge"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CourtHive Challenge Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#indexeddb" class="table-of-contents__link">IndexedDB</a></li><li><a href="#socketio" class="table-of-contents__link">socket.io</a></li><li><a href="#ui-framework" class="table-of-contents__link">UI Framework</a></li><li><a href="#initialization-and-configuration" class="table-of-contents__link">Initialization and Configuration</a><ul><li><a href="#defaultsjs" class="table-of-contents__link">defaults.js</a></li><li><a href="#contextjs" class="table-of-contents__link">context.js</a></li><li><a href="#development-mode" class="table-of-contents__link">development mode</a></li><li><a href="#tennis-open-data-standard-tods" class="table-of-contents__link">Tennis Open Data Standard (TODS)</a></li><li><a href="#engines" class="table-of-contents__link">Engines</a></li><li><a href="#engines-add-context" class="table-of-contents__link">Engines Add Context</a></li><li><a href="#engines-and-redux" class="table-of-contents__link">Engines and Redux</a></li><li><a href="#redux-store" class="table-of-contents__link">Redux Store</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 CourtHive</div></div></div></footer></div>
<script src="/assets/js/styles.704a0bc6.js"></script>
<script src="/assets/js/runtime~main.045d8d53.js"></script>
<script src="/assets/js/main.7992feb9.js"></script>
<script src="/assets/js/common.dac80fd1.js"></script>
<script src="/assets/js/21.6a070af4.js"></script>
<script src="/assets/js/22.89fb6b29.js"></script>
<script src="/assets/js/935f2afb.2c9593c0.js"></script>
<script src="/assets/js/17896441.34261008.js"></script>
<script src="/assets/js/5281b7a2.3801e63c.js"></script>
</body>
</html>